<!DOCTYPE html>
<html>
<head>
  <title>Spotify Login Test</title>
</head>
<body>
  <button id="login">Login to Spotify</button>

  <script>
  const clientId = "f8f5bd245ea54c508891e50e6cd43288"; // replace with your Client ID
  const redirectUri = window.location.origin + window.location.pathname; // same URL you set in Spotify Dashboard

   const scopes = 'playlist-read-private playlist-modify-private user-read-playback-state user-modify-playback-state';

    document.getElementById('login').onclick = () => {
      const authUrl = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=token&redirect_uri=${encodeURIComponent(redirectUri)}&scope=${encodeURIComponent(scopes)}`;
      window.location = authUrl;
    };

    // After redirect, get the access token from URL
    window.onload = () => {
      const hash = window.location.hash;
      if (hash) {
        const token = hash.match(/access_token=([^&]*)/)[1];
        console.log('Spotify access token:', token);
      }
    };
  </script>

  <script>
  const token = 'BQBho02ego8R_HqSPgYSqiC7Sx3CxoF3QXT8wE-Zujlw8E6r2Vv9Xh4pvoLRalhauO1xZWpt2NF8p1d2C0UKTbyN7zeWHE1_PsEqXh5a1LEXVuBH3UmplC4jSn60DO1x1cGKkbwu8vI';

  async function getPlaylists() {
    const response = await fetch('https://api.spotify.com/v1/me/playlists', {
      headers: {
        'Authorization': 'Bearer ' + token
      }
    });

    const data = await response.json();
    console.log('Your playlists:', data);

    // Show playlists on the page
    const listDiv = document.createElement('div');
    data.items.forEach(pl => {
      const p = document.createElement('p');
      p.textContent = pl.name + ' (' + pl.tracks.total + ' tracks)';
      listDiv.appendChild(p);
    });
    document.body.appendChild(listDiv);
  }

  getPlaylists();
</script>

</body>
</html>
